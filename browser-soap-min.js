!function(t){var e=function(){var P={};if(typeof require==="undefined")P.__sr=function(){};else P.__sr=require;return P.__r=function(t){t=P[t];return null===t.sts&&t.load.call(),t.mod.exports},P.https={sts:1,mod:{exports:P.__sr("https")}},P.http={sts:1,mod:{exports:P.__sr("http")}},P.crypto={sts:1,mod:{exports:P.__sr("crypto")}},P.a={sts:null,mod:{exports:{}},load:function(){var t=P.a.mod;t.exports;P.__sr.resolve,P.a.sts=0,t.exports.decode=function(t,e,s,n){e=e||"&",s=s||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);e=1e3;n&&"number"==typeof n.maxKeys&&(e=n.maxKeys);var r=t.length;0<e&&e<r&&(r=e);for(var a=0;a<r;++a){var p,c=t[a].replace(i,"%20"),h=c.indexOf(s),u=0<=h?(p=c.substr(0,h),c.substr(h+1)):(p=c,""),l=decodeURIComponent(p),h=decodeURIComponent(u);c=o,u=l,Object.prototype.hasOwnProperty.call(c,u)?Array.isArray(o[l])?o[l].push(h):o[l]=[o[l],h]:o[l]=h}return o};function i(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}t.exports.encode=function(s,n,o,t){return n=n||"&",o=o||"=",null===s&&(s=void 0),"object"==typeof s?Object.keys(s).map(function(t){var e=encodeURIComponent(i(t))+o;return Array.isArray(s[t])?s[t].map(function(t){return e+encodeURIComponent(i(t))}).join(n):e+encodeURIComponent(i(s[t]))}).join(n):t?encodeURIComponent(i(t))+o+encodeURIComponent(i(s)):""},P.a.sts=1}.bind(this)},P.b={sts:null,mod:{exports:{}},load:function(){function t(t){var e={"./querystring":"a"}[t];return e?P.__r(e):P.__sr(t)}var e=P.b.mod,s=e.exports;t.resolve=P.__sr.resolve,P.b.sts=0,(s=e.exports).parse=u,s.resolve=function(t,e){return l(n(t,e))},s.resolveObject=n,s.format=l;var d=/^([a-z0-9]+:)/,f=/:[0-9]+$/,m=["/","?",";","#"],y={file:!0,"file:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=t("./querystring");function u(t,e,s){if(t&&"object"==typeof t&&t.href)return t;var n,o={href:t},i=t,t=d.exec(i);if(t&&(t=t[0],o.protocol=t,i=i.substr(t.length)),(s||t||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(n="//"===i.substr(0,2))||t&&y[t]||(i=i.substr(2),o.slashes=!0)),!y[t]&&(n||t&&!v[t])){for(var r=-1,a=0,p=m.length;a<p;a++){var c=i.indexOf(m[a]);-1!==c&&(r<0||c<r)&&(r=c)}i=-1!==r?(o.host=i.substr(0,r),i.substr(r)):(o.host=i,"");for(var h=function(t){var e={},s=t.indexOf("@");-1!==s&&(e.auth=t.substr(0,s),t=t.substr(s+1));s=f.exec(t);s&&(s=s[0],e.port=s.substr(1),t=t.substr(0,t.length-s.length));t&&(e.hostname=t);return e}(o.host),u=Object.keys(h),a=0,p=u.length;a<p;a++){var l=u[a];o[l]=h[l]}o.hostname=o.hostname||""}t=i.indexOf("#");-1!==t&&(o.hash=i.substr(t),i=i.slice(0,t));t=i.indexOf("?");return-1!==t?(o.search=i.substr(t),o.query=i.substr(t+1),e&&(o.query=g.parse(o.query)),i=i.slice(0,t)):e&&(o.query={}),i&&(o.pathname=i),o.path=o.pathname+o.search,o}function l(t){"string"==typeof t&&(t=u(t));var e=t.protocol||"",s=void 0!==t.host?t.host:void 0!==t.hostname&&(t.auth?t.auth+"@":"")+t.hostname+(t.port?":"+t.port:""),n=t.pathname||"",o=t.search||t.query&&"?"+("object"==typeof t.query?g.stringify(t.query):String(t.query))||"",i=t.hash||"";return e&&":"!==e.substr(-1)&&(e+=":"),t.slashes||(!e||v[e])&&!1!==s?(s="//"+(s||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):s=s||"",i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),e+s+n+o+i}function n(t,e){if(!t)return e;if(t=u(l(t),!1,!0),e=u(l(e),!1,!0),t.hash=e.hash,""===e.href)return t;if(e.slashes&&!e.protocol)return e.protocol=t.protocol,e;if(e.protocol&&e.protocol!==t.protocol){if(!v[e.protocol])return e;if(t.protocol=e.protocol,!e.host&&!y[e.protocol]){for(var s=(e.pathname||"").split("/");s.length&&!(e.host=s.shift()););e.host||(e.host=""),""!==s[0]&&s.unshift(""),s.length<2&&s.unshift(""),e.pathname=s.join("/")}return t.pathname=e.pathname,t.search=e.search,t.query=e.query,t.host=e.host||"",delete t.auth,delete t.hostname,t.port=e.port,t}var n=t.pathname&&"/"===t.pathname.charAt(0),o=void 0!==e.host||e.pathname&&"/"===e.pathname.charAt(0),i=o||n||t.host&&e.pathname,r=i,a=t.pathname&&t.pathname.split("/")||[],s=e.pathname&&e.pathname.split("/")||[],n=t.protocol&&!v[t.protocol]&&void 0!==t.host;if(n&&(delete t.hostname,delete t.auth,delete t.port,t.host&&(""===a[0]?a[0]=t.host:a.unshift(t.host)),delete t.host,e.protocol&&(delete e.hostname,delete e.auth,delete e.port,e.host&&(""===s[0]?s[0]=e.host:s.unshift(e.host)),delete e.host),i=i&&(""===s[0]||""===a[0])),o)t.host=(e.host||""===e.host?e:t).host,t.search=e.search,t.query=e.query,a=s;else if(s.length)(a=a||[]).pop(),a=a.concat(s),t.search=e.search,t.query=e.query;else if("search"in e)return n&&(t.host=a.shift()),t.search=e.search,t.query=e.query,t;if(!a.length)return delete t.pathname,t;for(var p=a.slice(-1)[0],o=(t.host||e.host)&&("."===p||".."===p)||""===p,c=0,h=a.length;0<=h;h--)"."==(p=a[h])?a.splice(h,1):".."===p?(a.splice(h,1),c++):c&&(a.splice(h,1),c--);if(!i&&!r)for(;c--;)a.unshift("..");!i||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift(""),o&&"/"!==a.join("/").substr(-1)&&a.push("");o=""===a[0]||a[0]&&"/"===a[0].charAt(0);return n&&(t.host=o?"":a.shift()),(i=i||t.host&&a.length)&&!o&&a.unshift(""),t.pathname=a.join("/"),t}P.b.sts=1}.bind(this)},P.c={sts:null,mod:{exports:{}},load:function(){var t=P.c.mod;t.exports;P.__sr.resolve,P.c.sts=0;var h={x:function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var t,e=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],s=0;s<e.length;s++)try{t=new ActiveXObject(e[s]);break}catch(t){}return t},send:function(t,e,s,n,o,i){void 0===i&&(i=!0);var r=h.x();r.open(s,t,i),r.onreadystatechange=function(){4==r.readyState&&e(r)};for(var a=Object.keys(o),p=0;p<a.length;p++){var c=a[p];r.setRequestHeader(c,o[c])}r.send(n)}};t.exports=h,P.c.sts=1}.bind(this)},P.d={sts:null,mod:{exports:{}},load:function(){function u(t){var e={"./url":"b","./ajax":"c",https:"https",http:"http"}[t];return e?P.__r(e):P.__sr(t)}var t=P.d.mod.exports;u.resolve=P.__sr.resolve,P.d.sts=0;var l=u("./url"),d=u("./ajax");t.request=function(t,e,n,s,o){if("undefined"!=typeof window){for(var i in c={Accept:"text/html,application/xhtml+xml,application/xml","Content-Type":"application/x-www-form-urlencoded"},s=s||{})c[i]=s[i];d.send(t,function(t){var e={statusCode:t.status},s=Math.floor(t.status/100);n(2===s?null:"Eroor:: "+t.status,e,t.responseText)},e?"POST":"GET",e,c)}else{var r=l.parse(t),a="https:"==r.protocol,p=r.hostname,t=(parseInt(r.port||(a?443:80)),[r.pathname||"/",r.search||"",r.hash||""].join(""),e?"POST":"GET"),c={"User-Agent":"node-soap/0.2.0",Accept:"text/html,application/xhtml+xml,application/xml","Accept-Encoding":"none","Accept-Charset":"utf-8",Connection:"close",Host:p};for(i in"string"==typeof e&&(c["Content-Length"]=Buffer.byteLength(e,"utf8")),s=s||{})c[i]=s[i];var h=r;for(i in h.method=t,h.headers=c,o=o||{})h[i]=o[i];a=u(a?"https":"http").request(h,function(t,e){e="";t.on("data",function(t){e+=t}),t.on("end",function(){n(null,t,e)})});a.on("error",n),a.end(e)}},P.d.sts=1}.bind(this)},P.e={sts:null,mod:{exports:{}},load:function(){var t=P.e.mod;t.exports;P.__sr.resolve,P.e.sts=0,t.exports=function(t,e){if(1!=!!t)throw console.log(e),new Error(e)},P.e.sts=1}.bind(this)},P.f={sts:null,mod:{exports:{}},load:function(){var t=P.f.mod.exports,e=function(t){var e={"./http":"d","./assert":"e","./url":"b"}[t];return e?P.__r(e):P.__sr(t)};e.resolve=P.__sr.resolve,P.f.sts=0;var m=e("./http"),y=e("./assert"),e=(e("./url"),function(t,e){this.wsdl=t,this._initializeServices(e)});e.prototype.setEndpoint=function(t){this.endpoint=t,this._initializeServices(t)},e.prototype.describe=function(){this.wsdl.definitions.types;return this.wsdl.describeServices()},e.prototype.setSecurity=function(t){this.security=t},e.prototype.setSOAPAction=function(t){this.SOAPAction=t},e.prototype._initializeServices=function(t){var e,s=this.wsdl.definitions.services;for(e in s)this[e]=this._defineService(s[e],t)},e.prototype._defineService=function(t,e){var s,n=t.ports,o={};for(s in n)o[s]=this._definePort(n[s],e||n[s].location);return o},e.prototype._definePort=function(t,e){var s,n=e,o=t.binding.methods,i={};for(s in o)i[s]=this._defineMethod(o[s],n),this[s]||(this[s]=i[s]);return i},e.prototype._defineMethod=function(e,s){var o=this;return function(t,n){"function"==typeof t&&(n=t,t={}),o._invoke(e,t,s,function(t,e,s){n(t,e,s)})}},e.prototype._invoke=function(t,arguments,e,o){var s,i=this,r=t.$name,n=t.input,a=t.output,p=t.style,c=this.wsdl.definitions,h=c.$targetNamespace,u="",l="",d={SOAPAction:this.SOAPAction?this.SOAPAction(h,r):(h.lastIndexOf("/")!=h.length-1?h+"/":h)+r,"Content-Type":"text/xml; charset=utf-8"},f={},c=function(t,e){for(var s in t)if(t[s]===e)return s}(c.xmlns,h);i.security&&i.security.addHeaders&&i.security.addHeaders(d),i.security&&i.security.addOptions&&i.security.addOptions(f),n.parts?(y(!p||"rpc"==p,"invalid message definition for document style binding"),l=i.wsdl.objectToRpcXML(r,arguments,c,h),"encoded"===t.inputSoap&&(u='soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" ')):l="string"==typeof arguments?arguments:(y(!p||"document"==p,"invalid message definition for rpc style binding"),i.wsdl.objectToDocumentXML(n.$name,arguments,n.targetNSAlias,n.targetNamespace)),s='<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" '+u+this.wsdl.xmlnsInEnvelope+"><soap:Header>"+(i.security?i.wsdl.objectToXML(i.security,null,c,h):"")+"</soap:Header><soap:Body>"+l+"</soap:Body></soap:Envelope>",m.request(e,s,function(t,e,s){if(t)o(t,s?i.wsdl.xmlToObject(s):null,s);else{try{var n=i.wsdl.xmlToObject(s)}catch(t){return o(t,e,s)}e=(e=n.Body[a.$name])||n.Body[r+"Response"];o(null,e,s)}},d,f)},t.Client=e,P.f.sts=1}.bind(this)},P.g={sts:null,mod:{exports:{}},load:function(){var t=P.g.mod.exports,e=function(t){var e={"./http":"d","./url":"b","./assert":"e"}[t];return e?P.__r(e):P.__sr(t)};e.resolve=P.__sr.resolve,P.g.sts=0;var f=e("node-xml"),s=e("./http"),r=e("./url"),c=e("./assert"),p={string:1,boolean:1,decimal:1,float:1,double:1,anyType:1,byte:1,int:1,long:1,short:1,unsignedByte:1,unsignedInt:1,unsignedLong:1,unsignedShort:1,duration:0,dateTime:0,time:0,date:0,gYearMonth:0,gYear:0,gMonthDay:0,gDay:0,gMonth:0,hexBinary:0,base64Binary:0,anyURI:0,QName:0,NOTATION:0};function m(t){var e=null!=t?t.indexOf(":"):-1;return e<0?{namespace:null,name:t}:{namespace:t.substring(0,e),name:t.substring(e+1)}}function h(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t}var a=/^[\s\xA0]+/,y=/[\s\xA0]+$/;var u=function(t,e){var s,n=m(t);for(s in this.nsName=t,this.namespace=n.namespace,this.name=n.name,this.children=[],this.xmlns={},e){var o=/^xmlns:?(.*)$/.exec(s);o?this.xmlns[o[1]]=e[s]:this["$"+s]=e[s]}};u.prototype.deleteFixedAttrs=function(){this.children&&0===this.children.length&&delete this.children,this.xmlns&&0===Object.keys(this.xmlns).length&&delete this.xmlns,delete this.nsName,delete this.namespace,delete this.name},u.prototype.allowedChildren=[],u.prototype.startElement=function(t,e,s){var n;this.allowedChildren&&((n=this.allowedChildren[m(e).name])?t.push(new n(e,s)):this.unexpected(e))},u.prototype.endElement=function(t,e){this.nsName===e&&(t.length<2||(e=t[t.length-2],this!==t[0]&&(function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])}(t[0].xmlns,this.xmlns),e.children.push(this),e.addChild(this)),t.pop()))},u.prototype.addChild=function(t){},u.prototype.unexpected=function(t){throw new Error("Found unexpected element ("+t+") inside "+this.nsName)},u.prototype.description=function(t){return this.$name||this.name},u.prototype.init=function(){},u.createSubClass=function(){function t(){e.apply(this,arguments),this.init()}var e=this;return t.prototype.__proto__=e.prototype,t};var n,o=u.createSubClass(),i=u.createSubClass(),l=u.createSubClass(),d=u.createSubClass(),v=u.createSubClass(),g=u.createSubClass(),x=u.createSubClass(),b=u.createSubClass(),w=u.createSubClass(),_=u.createSubClass(),S=u.createSubClass(),$=u.createSubClass(),T=u.createSubClass(),j=u.createSubClass(),C=u.createSubClass(),e=u.createSubClass(),A=u.createSubClass(),M=u.createSubClass(),O={types:[$,"schema"],schema:[S,"element complexType simpleType include import"],element:[o,"annotation complexType"],simpleType:[d,"restriction"],restriction:[v,"enumeration"],enumeration:[g,""],complexType:[x,"annotation sequence all"],sequence:[b,"element"],all:[w,"element"],service:[A,"port documentation"],port:[e,"address"],binding:[C,"_binding SecuritySpec operation"],portType:[j,"operation"],message:[_,"part documentation"],operation:[T,"documentation input output fault _operation"],input:[i,"body SecuritySpecRef documentation header"],output:[l,"body SecuritySpecRef documentation header"],fault:[u,"_fault"],definitions:[M,"types message portType binding service"]};for(n in O){var E=O[n];E[0].prototype.allowedChildren=function(t){var t=t.split(" "),e={};return t.forEach(function(t){e[t.replace(/^_/,"")]=(O[t]||[u])[0]}),e}(E[1])}_.prototype.init=function(){this.element=null,this.parts=null},S.prototype.init=function(){this.complexTypes={},this.types={},this.elements={},this.includes=[]},$.prototype.init=function(){this.schemas={}},T.prototype.init=function(){this.input=null,this.output=null,this.inputSoap=null,this.outputSoap=null,this.style="",this.soapAction=""},j.prototype.init=function(){this.methods={}},C.prototype.init=function(){this.transport="",this.style="",this.methods={}},e.prototype.init=function(){this.location=null},A.prototype.init=function(){this.ports={}},M.prototype.init=function(){"definitions"!==this.name&&this.unexpected(nsName),this.messages={},this.portTypes={},this.bindings={},this.services={},this.schemas={}},S.prototype.addChild=function(t){var e;t.$name in p||("include"===t.name||"import"===t.name?(e=t.$schemaLocation||t.$location)&&this.includes.push({namespace:t.$namespace||t.$targetNamespace||this.$targetNamespace,location:e}):"complexType"===t.name?this.complexTypes[t.$name]=t:"element"===t.name?this.elements[t.$name]=t:t.$name&&(this.types[t.$name]=t),this.children.pop())},$.prototype.addChild=function(t){c(t instanceof S),t.$targetNamespace?this.schemas[t.$targetNamespace]=t:this.schemas[t.includes[0].namespace]=t},i.prototype.addChild=function(t){"body"===t.name&&(this.use=t.$use,"encoded"===this.use&&(this.encodingStyle=t.$encodingStyle),this.children.pop())},l.prototype.addChild=function(t){"body"===t.name&&(this.use=t.$use,"encoded"===this.use&&(this.encodingStyle=t.$encodingStyle),this.children.pop())},T.prototype.addChild=function(t){"operation"===t.name&&(this.soapAction=t.$soapAction||"",this.style=t.$style||"",this.children.pop())},C.prototype.addChild=function(t){"binding"===t.name&&(this.transport=t.$transport,this.style=t.$style,this.children.pop())},e.prototype.addChild=function(t){"address"===t.name&&void 0!==t.$location&&(this.location=t.$location)},M.prototype.addChild=function(t){var e=this;t instanceof $?e.schemas=t.schemas:t instanceof _?e.messages[t.$name]=t:t instanceof j?e.portTypes[t.$name]=t:t instanceof C?"http://schemas.xmlsoap.org/soap/http"!==t.transport&&"http://www.w3.org/2003/05/soap/bindings/HTTP/"!==t.transport||(e.bindings[t.$name]=t):t instanceof A?e.services[t.$name]=t:c(!1,"Invalid child type"),this.children.pop()},_.prototype.postProcess=function(t){var e,s=null,n=this.children||[];for(i in n)if("part"===(e=n[i]).name){s=e;break}if(s){if(s.$element){delete this.parts;var o=(r=m(s.$element)).namespace;this.element=t.schemas[t.xmlns[o]].elements[r.name],this.element.targetNSAlias=o,this.element.targetNamespace=t.xmlns[o],this.children.splice(0,1)}else{this.parts={},delete this.element;for(var i=0;s=this.children[i];i++){c("part"===s.name,"Expected part element");var r=m(s.$type),o=t.xmlns[r.namespace],a=r.name,p=t.schemas[o];this.parts[s.$name]=void 0!==p?t.schemas[o].types[a]||t.schemas[o].complexTypes[a]:s.$type,this.parts[s.$name].namespace=r.namespace,this.parts[s.$name].xmlns=o,this.children.splice(i--,1)}}this.deleteFixedAttrs()}},T.prototype.postProcess=function(t,e){for(var s,n,o=this.children,i=0;s=o[i];i++)"input"!==s.name&&"output"!==s.name||("binding"!==e?(n=m(s.$message).name,(n=t.messages[n]).postProcess(t),n.element?(t.messages[n.element.$name]=n,this[s.name]=n.element):this[s.name]=n):this[s.name]=s,o.splice(i--,1));this.deleteFixedAttrs()},j.prototype.postProcess=function(t){var e=this.children;if(void 0!==e){for(var s,n=0;s=e[n];n++)"operation"==s.name&&(s.postProcess(t,"portType"),this.methods[s.$name]=s,e.splice(n--,1));delete this.$name,this.deleteFixedAttrs()}},C.prototype.postProcess=function(t){var e=m(this.$type).name,e=t.portTypes[e],s=this.style,n=this.children;e.postProcess(t),this.methods=e.methods;for(var o,i,r=0;o=n[r];r++)"operation"==o.name&&(o.postProcess(t,"binding"),n.splice(r--,1),o.style||(o.style=s),(i=this.methods[o.$name]).style=o.style,i.soapAction=o.soapAction,i.inputSoap=o.input||null,i.outputSoap=o.output||null,i.inputSoap&&i.inputSoap.deleteFixedAttrs(),i.outputSoap&&i.outputSoap.deleteFixedAttrs());delete this.$name,delete this.$type,this.deleteFixedAttrs()},A.prototype.postProcess=function(t){for(var e,s,n=this.children,o=t.bindings,i=0;e=n[i];i++)"port"==e.name&&((s=o[m(e.$binding).name])&&(s.postProcess(t),this.ports[e.$name]={location:e.location,binding:s},n.splice(i--,1)));delete this.$name,this.deleteFixedAttrs()},d.prototype.description=function(t){for(var e,s=this.children,n=0;e=s[n];n++)if(e instanceof v)return this.$name+"|"+e.description();return{}},v.prototype.description=function(){return(this.$base?this.$base+"|":"")+this.children.map(function(t){return t.description()}).join(",")},g.prototype.description=function(){return this.$value},x.prototype.description=function(t){for(var e,s=this.children,n=0;e=s[n];n++)if(e instanceof b||e instanceof w)return e.description(t);return{}},o.prototype.description=function(t){var e={},s=this.$name;if(this.$minOccurs!==this.$maxOccurs&&(s+="[]"),this.$type){var n=m(this.$type).name,o=t.xmlns[m(this.$type).namespace],o=(o=t.schemas[o])&&(o.complexTypes[n]||o.types[n]);e[s]=!o||n in p?this.$type:o.description(t)}else{var i=this.children;e[s]={};for(var r,a=0;r=i[a];a++)r instanceof x&&(e[s]=r.description(t))}return e},w.prototype.description=b.prototype.description=function(t){for(var e,s=this.children,n={},o=0;e=s[o];o++){var i,r=e.description(t);for(i in r)n[i]=r[i]}return n},_.prototype.description=function(t){if(this.element)return this.element&&this.element.description(t);t={};return t[this.$name]=this.parts,t},j.prototype.description=function(t){var e,s={};for(e in this.methods){var n=this.methods[e];s[e]=n.description(t)}return s},T.prototype.description=function(t){var e=this.input.description(t),t=this.output.description(t);return{input:e&&e[Object.keys(e)[0]],output:t&&t[Object.keys(t)[0]]}},C.prototype.description=function(t){var e,s={};for(e in this.methods){var n=this.methods[e];s[e]=n.description(t)}return s},A.prototype.description=function(t){var e,s={};for(e in this.ports){var n=this.ports[e];s[e]=n.binding.description(t)}return s};function L(t,e,s){var n,l=this;if(this.uri=e,this.callback=function(){},this.options=s||{},"string"==typeof t)n=this._fromXML;else{if("object"!=typeof t)throw new Error("WSDL constructor takes either an XML string or service definition");n=this._fromServices}setTimeout(function(){n.call(l,t),l.processIncludes(function(t){l.definitions.deleteFixedAttrs();var e=l.services=l.definitions.services;if(e)for(var s in e)e[s].postProcess(l.definitions);var n=l.definitions.complexTypes;if(n)for(var s in n)n[s].deleteFixedAttrs();var o,i=l.definitions.bindings;for(o in i){var r=i[o];if("document"===r.style){var a,p=r.methods,c=r.topElements={};for(a in p){var h=p[a].input.$name,u=p[a].output.$name;c[h]={methodName:a,outputName:u}}}}l.xmlnsInEnvelope=l._xmlnsMap(),l.callback(t,l)})},0)}function N(n,o,i){var r;return"function"==typeof o&&(i=o,o={}),s.request(n,null,function(t,e,s){t?i(t):e&&200==e.statusCode?(r=new L(s,n,o)).onReady(i):i(new Error("Invalid WSDL URL: "+n))}),r}L.prototype.onReady=function(t){t&&(this.callback=t)},L.prototype._processNextInclude=function(s,n){var o=this,i=s.shift();if(!i)return n();N(r.resolve(o.uri,i.location),function(t,e){o.definitions.schemas[i.namespace||e.definitions.$targetNamespace]=e.definitions,o._processNextInclude(s,function(t){n(t)})})},L.prototype.processIncludes=function(t){var e,s=this.definitions.schemas,n=[];for(e in s)var o=s[e],n=n.concat(o.includes||[]);this._processNextInclude(n,t)},L.prototype.describeServices=function(){var t,e={};for(t in this.services){var s=this.services[t];e[t]=s.description(this.definitions)}return e},L.prototype.toXML=function(){return this.xml||""},L.prototype.xmlToObject=function(t){var e,c,s,h=this,n=new f.SaxParser(function(t){e=t}),u=null,o={},l=[{name:null,object:o,schema:{Envelope:{Header:{Security:{UsernameToken:{Username:"string",Password:"string"}}},Body:{Fault:{faultcode:"string",faultstring:"string",detail:"string"}}}}}],d={};for(s in e.onStartElementNS(function(t,s,e,n,o){t=e?e+":"+t:t;s=s.reduce(function(t,e,s){return t[e[0]]=e[1],t},{}),o.forEach(function(t){var e=t[0],t=t[1];s["xmlns"+(e?":":"")+e]=t});var i=m(t).name,r=l[l.length-1],a=r.schema,p=i;u||"Body"!==r.name||"Fault"===i||((e=h.definitions.messages[i])||(o=!1,/Response$/.test(i)?i=i.replace(/Response$/,""):/Request$/.test(i)?(o=!0,i=i.replace(/Request$/,"")):/Solicit$/.test(i)&&(o=!0,i=i.replace(/Solicit$/,"")),t=(t=h.definitions.portTypes)[Object.keys(t)[0]],i=(o?t.methods[i].input:t.methods[i].output).$name,e=h.definitions.messages[i],h.definitions.messages[p]=h.definitions.messages[i]),a=e.description(h.definitions),u=p),s.href&&(c=s.href.substr(1),d[c]||(d[c]={hrefs:[],obj:null}),d[c].hrefs.push({par:r.object,key:i})),(c=s.id)&&(d[c]||(d[c]={hrefs:[],obj:null})),a&&a[i+"[]"]&&(i+="[]"),l.push({name:p,object:{},schema:a&&a[i],id:s.id})}),e.onEndElementNS(function(t,e,s){t=e?e+":"+t:t;var n=l.pop(),o=n.object,i=l[l.length-1],e=i.object,i=i.schema,t=m(t).name;i&&i[t+"[]"]&&"string"!=typeof i[t+"[]"]?(e[t]||(e[t]=[]),e[t].push(o)):t in e?(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(o)):e[t]=o,n.id&&(d[n.id].obj=o)}),e.onCharacters(function(t){var e,s;(t=t.replace(a,"").replace(y,"")).length&&(t="int"===(s=m((e=l[l.length-1]).schema).name)?parseInt(t,10):"dateTime"===s?new Date(t):"string"!=typeof e.object?t:e.object+t,e.object=t)}),n.parseString(t),d){var i=d[s],r=i.obj;i.hrefs.forEach(function(t){t.par[t.key]=r})}return o.Envelope.Body.Fault,o.Envelope},L.prototype.objectToDocumentXML=function(t,e,s,n){var o={};return o[t]=e,this.objectToXML(o,null,s,n)},L.prototype.objectToRpcXML=function(t,e,s,n){var o,i,r=[],a=this.definitions,s=s||function(t,e){for(var s in t)if(t[s]===e)return s}(a.xmlns,n),n=n||a.xmlns[s];for(o in r.push(["<",s,":",t,">"].join("")),e)"_xmlns"!=o&&(i=e[o],r.push(["<",s,":",o,">"].join("")),r.push("object"==typeof i?this.objectToXML(i):h(i)),r.push(["</",s,":",o,">"].join("")));return r.push(["</",s,":",t,">"].join("")),r.join("")},L.prototype.objectToXML=function(t,e,s,n){var o=[],i="",r=s?s+":":"";if(Array.isArray(t))for(var a,p=0;a=t[p];p++)0<p&&(o.push(["</",r,e,">"].join("")),o.push(["<",r,e,i,">"].join(""))),o.push(this.objectToXML(a,e));else if("object"==typeof t)for(var e in t){var c=t[e];o.push(["<",r,e,i,">"].join("")),o.push(this.objectToXML(c,e,s)),o.push(["</",r,e,">"].join(""))}else t&&o.push(h(t));return o.join("")},L.prototype._parse=function(t){var e,r=this,s=new f.SaxParser(function(t){e=t}),a=[],p=null;return e.onStartElementNS(function(e,s,t,n,o){e=t?t+":"+e:e;s=s.reduce(function(t,e,s){return t[e[0]]=e[1],t},{}),o.forEach(function(t){var e=t[0],t=t[1];s["xmlns"+(e?":":"")+e]=t});var i=a[a.length-1];if(i)try{i.startElement(a,e,s)}catch(t){if(r.options.strict)throw t;a.push(new u(e,s))}else{o=m(e).name;if("definitions"===o)p=new M(e,s);else{if("schema"!==o)throw new Error("Unexpected root element of WSDL or include");p=new S(e,s)}a.push(p)}}),e.onEndElementNS(function(t,e,s){t=e?e+":"+t:t;e=a[a.length-1];c(e,"Unmatched close tag: "+t),e.endElement(a,t)}),e.onWarning(function(t){console.log("<WARNING>"+t+"</WARNING>")}),e.onError(function(t){console.log("<ERROR>"+JSON.stringify(t)+"</ERROR>")}),s.parseString(t),p},L.prototype._fromXML=function(t){this.definitions=this._parse(t),this.xml=t},L.prototype._fromServices=function(t){},L.prototype._xmlnsMap=function(){var t,e=this.definitions.xmlns,s="";for(t in e)if(""!==t){var n=e[t];switch(n){case"http://xml.apache.org/xml-soap":case"http://schemas.xmlsoap.org/wsdl/":case"http://schemas.xmlsoap.org/wsdl/soap/":case"http://schemas.xmlsoap.org/soap/encoding/":case"http://www.w3.org/2001/XMLSchema":continue}~n.indexOf("http://schemas.xmlsoap.org/")||~n.indexOf("http://www.w3.org/")||~n.indexOf("http://xml.apache.org/")||(s+=" xmlns:"+t+'="'+n+'"')}return s},t.open_wsdl=N,t.WSDL=L,P.g.sts=1}.bind(this)},P.h={sts:null,mod:{exports:{}},load:function(){var t=P.h.mod.exports,e=function(t){var e={"./client":"f","./wsdl":"g",crypto:"crypto"}[t];return e?P.__r(e):P.__sr(t)};e.resolve=P.__sr.resolve,P.h.sts=0;var o=e("./client").Client,i=e("./wsdl").open_wsdl,r=e("crypto"),e=e("./wsdl").WSDL,a={};function s(t,e){this._username=t,this._password=e}function n(t,e,s){this._username=t,this._password=e,this._passwordType=s||"PasswordText"}s.prototype.addHeaders=function(t){t.Authorization="Basic "+new Buffer(this._username+":"+this._password||"").toString("base64")},s.prototype.toXML=function(){return""};function p(t,e,s){var n=r.createHash("sha1"),t=new Buffer(t||"","base64").toString("binary");return n.update(t+e+s),n.digest("base64")}n.prototype.toXML=function(){function t(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z"}var e=new Date,s=t(e),n=t(new Date(e.getTime()+6e5)),e=r.createHash("sha1");e.update(s+Math.random());e=e.digest("base64");return'<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><wsu:Timestamp wsu:Id="Timestamp-'+s+'"><wsu:Created>'+s+"</wsu:Created><wsu:Expires>"+n+'</wsu:Expires></wsu:Timestamp><wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-'+s+'"><wsse:Username>'+this._username+"</wsse:Username>"+("PasswordText"===this._passwordType?"<wsse:Password>"+this._password+"</wsse:Password>":'<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">'+p(e,s,this._password)+"</wsse:Password>")+'<wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">'+e+"</wsse:Nonce><wsu:Created>"+s+"</wsu:Created></wsse:UsernameToken></wsse:Security>"},t.BasicAuthSecurity=s,t.WSSecurity=n,t.createClient=function(t,e,s,n){"function"==typeof e&&(n=s,s=e,e={}),n=e.endpoint||n,function(s,t,n){"function"==typeof t&&(n=t,t={});var e=a[s];e?n(null,e):i(s,t,function(t,e){return t?n(t):(a[s]=e,void n(null,e))})}(t,e,function(t,e){s(t,e&&new o(e,n))})},t.passwordDigest=p,t.WSDL=e,P.h.sts=1}.bind(this)},P.i={sts:null,mod:{exports:{}},load:function(){function t(t){var e={"./lib/soap":"h"}[t];return e?P.__r(e):P.__sr(t)}var e=P.i.mod;e.exports;t.resolve=P.__sr.resolve,P.i.sts=0,e.exports=t("./lib/soap"),P.i.sts=1}.bind(this)},P.__r("i")}.bind(t)();t["browser-soap"]=e,"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=e)}(this);
